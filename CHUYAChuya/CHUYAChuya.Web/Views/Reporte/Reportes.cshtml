@{
    Layout = null;
}
<div class="col-lg-11 col-lg-offset-0-5">
    <h3 class="text-center">REPORTES</h3>
    <input id="hdnEstado" type="hidden" style="display: block;" />
    <div id="target1" class="panel move panel-inverse active">
        <div class="panel-heading">COBRANZA DIARIA POR CAP</div>
        <div class="panel-body">
            <div class="hr-line-dashed"></div>
            <div class="row m-b-10 m-t-10">
                <div class="col-sm-11">
                    <div class="form-inline">
                        <div class="form-group m-r-40">
                            <label class="control-label m-r-5" for="status">Seleccionar CAP :</label>
                            <select name="status" id="cmbNotaEstado" class="form-control">
                                <option value="1" selected="">TODOS</option>
                                <option value="2">CAP 1</option>
                                <option value="3">CAP 2</option>
                                <option value="4">CAP 3</option>
                            </select>
                        </div>
                        <div class="form-group m-r-10">
                            <label class="control-label m-r-5" for="product_name">Del</label>

                        </div>
                        <div class="form-group">
                            <div class="input-daterange input-group" id="dtRango">
                                <input id="txtFI" type="text" class="form-control" name="start">
                                <span class="input-group-addon">al</span>
                                <input id="txtFF" type="text" class="form-control" name="end">
                            </div>
                        </div>
                        <input id="btnBuscarNota" type="button" value="Buscar" class="btn btn-sm btn-primary">
                    </div>
                </div>
            </div>
            <div class="hr-line-dashed"></div>
            <div class="row table-main">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
                </div>
            </div>
        </div>
    </div>
</div>
        <script type="text/javascript">

            $(function () {
                $('#container').highcharts({
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: 'Cantidad de operaciones por CAPs del X al X'
                    },
                    /*subtitle: {
                        text: 'Source: WorldClimate.com'
                    },*/
                    xAxis: {
                        categories: [
                            'CAP 1',
                            'CAP 2',
                            'CAP 3',
                            'CAP 4',
                            'CAP 5',
                            'CAP 6',
                            'CAP 7',
                            'CAP 8',
                            'CAP 9',
                            'CAP 10',
                            'CAP 11',
                            'CAP 12'
                        ],
                        crosshair: true
                    },
                    yAxis: {
                        min: 0,
                        title: {
                            text: 'Operaciones'
                        }
                    },
                    tooltip: {
                        headerFormat: '<center><span style="font-size:11px">{point.key}</span></center><table>',
                        pointFormat: '<tr>' +
                            '<td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
                        footerFormat: '</table>',
                        shared: true,
                        useHTML: true
                    },
                    plotOptions: {
                        column: {
                            pointPadding: 0.2,
                            borderWidth: 0
                        }
                    },
                    legend: { enabled: false },
                    series: [{
                        name: 'Tokyo',
                        data: [250, 100, 500, 238, 120, 362, 463, 351, 365, 187, 325, 412]

                    }]
                });
            });
        </script>


<script type="text/javascript">

    jQuery(function ($) {
        SetRangoFecha("#dtRango");
        $('input.target').click(function () {
            vista($(this).attr('href'));
        });
    });

    var vista = function ($target) {
        var $target = $($target),
            $other = $('.active');

        if (!$target.hasClass('active')) {
            $other.each(function (index, self) {
                var $this = $(this);
                $this.removeClass('active').animate({
                    left: $this.width()
                }, 500).hide();
            });

            $target.addClass('active').show().css({
                left: -($target.width())
            }).animate({
                left: 0
            }, 500);
        }
    };

    $("#btnBuscarCli").bind("click", function () {
        ListarUsuarios();
    });

    $("#txtValor").keyup(function (e) {
        if (e.which == 13) { ListarUsuarios(); }
    });

    //Buscar datos persona

    var persSelec = {}

    function BuscarPersona(valor) {
        var aceptar = function (d) {
            persSelec = d;
            $("#hdnPersId").val(d.id);
            $("#txtDNI").val(d.doi);
            $("#txtNom").val(d.nom);
            $("#cmbSex input:radio").val([d.sexo]);
            $("#txtNatTel1").val(d.tel1);
            $("#txtNatDir").val(d.direc);
            $('#vntBuscaPersona').modal('hide');
        };

        var cancelar = function () {

        }
        $.fn.BuscarPersona({
            funcionAceptar: aceptar,
            funcionCancelar: cancelar,
            valor: valor
        });
    }

    $("#btnBuscarPers").bind("click", function () {
        BuscarPersona($("#txtBuscarPers").val());
    });

    $("#txtBuscarPers").bind("keyup", function (e) {
        if (e.which == 13) { BuscarPersona($(this).val()); };
    });

    $("#btnBuscarRol").bind("click", function () {
        $.fn.Ventana({
            id: "vntBuscaRol",
            titulo: "Seleccionar Rol",
            tamano: "sm"
        });

        var html = '<div class="row"><div class="row"><div id="cntListaRol" class="table-responsive"></div></div><div class="hr-line-dashed"></div><div class="row"><div class="col-sm-8 col-md-offset-4 text-right"><button id="btnRolAceptar" type="submit" class="btn btn-sm btn-primary m-r-5">Aceptar</button><button id="btnRolCancelar" type="submit" data-dismiss="modal" aria-hidden="true" class="btn btn-sm btn-default">Cancelar</button></div></div></div>';

        $("#vntBuscaRol .panel-body").html(html);
        $('#vntBuscaRol').modal('show');

        ListarRoles();

        $("#btnRolAceptar").bind("click", function () {
            if ($("#tblRol").find("tr.seleccionado").index() != -1) {
                var nRolId = $("#tblRol").find("tr.seleccionado").find("td").eq(0).html();
                var cRolDesc = $("#tblRol").find("tr.seleccionado").find("td").eq(1).html();

                $("#hdnPersRolId").val(nRolId);
                $("#txtRol").val(cRolDesc);
                $('#vntBuscaRol').modal('hide');
            } else {
                $.fn.Mensaje({ titulo: "Mensaje", mensaje: "Es necesario seleccionar un Rol" });
            }
        });

    });

    function ListarRoles() {
        $.fn.Conexion({
            direccion: '/Config/ListaRoles',
            terminado: function (data) {
                var d = JSON.parse(data);
                listaRoles = d;

                CrearTablaRoles(d);
            }
        });
    }

    function CrearTablaRoles(listaR) {
        $("#cntListaRol").Tabla({
            tblId: "tblRol",
            cabecera: "ID,ROLES",
            campos: "nRolId,cRolDesc",
            tblStyle: "table-inbox",
            scrollVertical: "Si",
            cellLen: "0",
            dblClick: true,
            alinear: "L,L",
            cantRegVertical: 15,
            editEvent: function (fila) {
                var nRolId = fila.find("td").eq(0).html();
                var cRolDesc = fila.find("td").eq(1).html();

                $("#hdnPersRolId").val(nRolId);
                $("#txtRol").val(cRolDesc);
                $('#vntBuscaRol').modal('hide');

            },
            datos: listaR
        });
    }

    //Registrar Usuario

    $("#btnGrabarUsu").bind("click", function () {
        var form = $("#frmUsuario");
        form.validator();

        var validator = form.data("bs.validator");
        validator.validate();

        if (!validator.hasErrors()) {
            valores = form.serializeArray();

            $.fn.Conexion({
                direccion: form.attr("action"),
                datos: valores,
                terminado: function (data, textStatus, jqXHR) {
                    if (data == -2) {
                        alerta("#msg", "Ya existe un usuario asignado a esta persona");
                        $("#txtBuscarPers").focus();
                    } else {
                        Resultado(data);
                    }
                },
                bloqueo: true
            });
        } else if ($("#txtCont1").val() != $("#txtCont2").val()) {
            alerta("#msg", "Los valores de la contraseña deben de ser iguales.");
        } else {
            alerta("#msg", "Es necesario completar los campos que están en rojo.");
        }

    });

    $("#btnCanUsu").bind("click", function () {
        Limpiar();
    });

    function Limpiar() {
        $('#frmUsuario')[0].reset();
        $('#frmDatPer')[0].reset();
        $("#hdnPersId").val("");
        $("#hdnPersRolId").val("");
        vista("#target1");
    }


    function Resultado(dato) {
        if (dato != -1) {
            if ($("#hdnEstado").val() == "E") {
                $.fn.Mensaje({ titulo: "Mensaje", mensaje: "Se modificó datos del usuario correctamente", funcionAceptar: Limpiar });
            } else {
                $.fn.Mensaje({ titulo: "Mensaje", mensaje: "Se registró datos del usuario correctamente", funcionAceptar: Limpiar });
            }
        } else {
            $.fn.Mensaje({ titulo: "Mensaje", mensaje: "La operación no se realizó correctamente" });
        }
    }

</script>
